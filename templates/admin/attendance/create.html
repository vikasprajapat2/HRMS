{% extends "base.html" %}
{% block title %}Create / Edit Attendance{% endblock %}
{% block content %}
<h2>{% if attendance %}Edit{% else %}Create{% endif %} Attendance</h2>

<form method="post" action="">
	<div>
		<label for="employee_id">Employee</label>
		<select name="employee_id" id="employee_id" required>
			<option value="">-- Select --</option>
			{% for e in employees %}
				<option value="{{ e.id }}" {% if attendance and attendance.employee_id==e.id %}selected{% endif %}>{{ e.firstname }} {{ e.lastname }}</option>
			{% endfor %}
		</select>
	</div>

	<div>
		<label for="date">Date</label>
		<input type="date" name="date" id="date" value="{% if attendance %}{{ attendance.date }}{% else %}{{ default_date }}{% endif %}" required>
	</div>

	<div>
		<label for="time_in">Time In</label>
		<input type="time" name="time_in" id="time_in" value="{% if attendance and attendance.time_in %}{{ attendance.time_in.strftime('%H:%M') }}{% endif %}">
	</div>

	<div>
		<label for="time_out">Time Out</label>
		<input type="time" name="time_out" id="time_out" value="{% if attendance and attendance.time_out %}{{ attendance.time_out.strftime('%H:%M') }}{% endif %}">
	</div>

	<div>
		<label for="status">Status</label>
		<select name="status" id="status">
			<option value="present" {% if attendance and attendance.status=='present' %}selected{% endif %}>Present</option>
			<option value="absent" {% if attendance and attendance.status=='absent' %}selected{% endif %}>Absent</option>
			<option value="leave" {% if attendance and attendance.status=='leave' %}selected{% endif %}>Leave</option>
		</select>
	</div>

	<div style="margin-top:8px;">
		<button class="btn btn-primary" type="submit">Save</button>
		<a class="btn btn-secondary" href="{{ url_for('attendance.index') }}">Cancel</a>
	</div>
</form>

{% endblock %}
